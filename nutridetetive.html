<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Detetive dos Nutrientes ðŸŒ±</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #d6f5d6, #fff5cc);
      color: #333;
      margin: 0;
      padding: 0;
    }
    header {
      background: #2e7d32;
      color: white;
      padding: 20px;
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    #container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: calc(100vh - 80px);
    }
    #game, #intro {
      width: 90%;
      max-width: 700px;
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      text-align: center;
      animation: fadeIn 0.7s ease-in-out;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(20px);}
      to {opacity: 1; transform: translateY(0);}
    }
    h2 {
      margin-top: 0;
    }
    button {
      display: inline-block;
      padding: 12px 20px;
      margin: 10px 5px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    button:hover {
      transform: scale(1.05);
    }
    .options button {
      width: 100%;
      background: #e8f5e9;
    }
    .options button:hover {
      background: #c8e6c9;
    }
    #hintBtn {
      background: #fff3cd;
    }
    #hintBtn:hover {
      background: #ffe082;
    }
    #feedback {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
    }
    #feedback.correct { color: #2e7d32; }
    #feedback.wrong { color: #c62828; }
    #score {
      margin-top: 10px;
      font-size: 18px;
      font-weight: bold;
    }
    #hints {
      margin-top: 20px;
      text-align: left;
    }
    .hint-box {
      background: #f1f8e9;
      border-left: 5px solid #8bc34a;
      margin: 10px 0;
      padding: 8px 12px;
      border-radius: 5px;
      font-style: italic;
    }
    ul.rules {
      text-align: left;
      margin: 20px;
      font-size: 16px;
      line-height: 1.6;
    }
    ul.rules li {
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <header>ðŸŒ¿ Detetive dos Nutrientes</header>
  <div id="container">
    <!-- Tela inicial -->
    <div id="intro">
      <h2>Bem-vindo!</h2>
      <p>VocÃª Ã© o <b>detetive dos nutrientes</b> e precisa diagnosticar deficiÃªncias e excessos em plantas.</p>
      <h3>ðŸ“œ Regras do jogo:</h3>
      <ul class="rules">
        <li>Cada questÃ£o apresenta um <b>sintoma</b> e vocÃª deve escolher o nutriente correto.</li>
        <li>VocÃª pode pedir atÃ© <b>3 dicas</b> por questÃ£o.</li>
        <li>Cada dica reduz sua pontuaÃ§Ã£o em <b>1 ponto</b>.</li>
        <li>Acertar a resposta dÃ¡ <b>+1 ponto</b>.</li>
        <li>No final, veja seu desempenho como consultor agrÃ­cola!</li>
      </ul>
      <button onclick="startGame()">ðŸš€ Iniciar Jogo</button>
    </div>

    <!-- Jogo -->
    <div id="game" style="display:none;">
      <h2 id="symptom"></h2>
      <div id="hints"></div>
      <div class="options" id="options"></div>
      <button id="hintBtn" onclick="showHint()">ðŸ’¡ Pedir dica (-1 ponto)</button>
      <div id="feedback"></div>
      <div id="score">PontuaÃ§Ã£o: 0</div>
    </div>
  </div>

  <script>
    // Banco de questÃµes (mesmo do Ãºltimo cÃ³digo)
    const allQuestions = [
      {
        sintoma: "Folhas mais velhas amareladas, planta pequena e baixa produÃ§Ã£o.",
        resposta: "NitrogÃªnio",
        opcoes: ["NitrogÃªnio", "FÃ³sforo", "PotÃ¡ssio", "Enxofre"],
        dicas: [
          "MÃ³vel: sintomas aparecem primeiro em folhas velhas.",
          "Parte de proteÃ­nas, enzimas, DNA e RNA.",
          "DeficiÃªncia causa clorose generalizada nas folhas inferiores."
        ]
      },
      {
        sintoma: "Folhas velhas ficam verde-escuras â†’ roxas â†’ amareladas.",
        resposta: "FÃ³sforo",
        opcoes: ["FÃ³sforo", "NitrogÃªnio", "CÃ¡lcio", "MagnÃ©sio"],
        dicas: [
          "MÃ³vel: sintomas em folhas mais velhas.",
          "Essencial para energia (ATP), DNA e RNA.",
          "DeficiÃªncia tÃ­pica: folhas velhas ficam arroxeadas."
        ]
      },
      {
        sintoma: "Bordas de folhas velhas ficam amareladas/necrÃ³ticas.",
        resposta: "PotÃ¡ssio",
        opcoes: ["PotÃ¡ssio", "Enxofre", "Boro", "Zinco"],
        dicas: [
          "MÃ³vel: sintomas em folhas velhas.",
          "MantÃ©m equilÃ­brio hÃ­drico e ativa enzimas.",
          "DeficiÃªncia: necrose nas bordas e pontas das folhas velhas."
        ]
      },
      {
        sintoma: "Necrose e deformaÃ§Ã£o em folhas novas, morte de gemas apicais.",
        resposta: "CÃ¡lcio",
        opcoes: ["CÃ¡lcio", "MagnÃ©sio", "Ferro", "ManganÃªs"],
        dicas: [
          "ImÃ³vel: sintomas aparecem em folhas novas.",
          "Parte da parede celular e algumas enzimas.",
          "DeficiÃªncia causa morte de gemas apicais e folhas jovens deformadas."
        ]
      },
      {
        sintoma: "Clorose internerval em folhas inferiores (velhas).",
        resposta: "MagnÃ©sio",
        opcoes: ["MagnÃ©sio", "Ferro", "Enxofre", "NitrogÃªnio"],
        dicas: [
          "MÃ³vel: sintomas aparecem em folhas velhas.",
          "Elemento central da molÃ©cula de clorofila.",
          "DeficiÃªncia: clorose internerval em folhas mais velhas."
        ]
      },
      {
        sintoma: "Amarelecimento uniforme nas folhas mais novas.",
        resposta: "Enxofre",
        opcoes: ["Enxofre", "NitrogÃªnio", "PotÃ¡ssio", "Cobre"],
        dicas: [
          "Pouco mÃ³vel: sintomas em folhas jovens.",
          "Parte de aminoÃ¡cidos sulfurados e enzimas.",
          "DeficiÃªncia: clorose geral em folhas superiores."
        ]
      },
      {
        sintoma: "Folhas novas deformadas e quebradiÃ§as; morte de gemas apicais.",
        resposta: "Boro",
        opcoes: ["Boro", "CÃ¡lcio", "MolibdÃªnio", "NÃ­quel"],
        dicas: [
          "ImÃ³vel: sintomas em folhas jovens.",
          "Importante para parede celular e transporte de aÃ§Ãºcares.",
          "DeficiÃªncia: folhas novas engrossadas, deformadas e morte de gemas."
        ]
      },
      {
        sintoma: "Folhas murchas e bronzeadas em formato de taÃ§a.",
        resposta: "Cloro",
        opcoes: ["Cloro", "Ferro", "Enxofre", "MagnÃ©sio"],
        dicas: [
          "MÃ³vel: relacionado Ã  funÃ§Ã£o osmÃ³tica.",
          "Cofator enzimÃ¡tico, participa da fotossÃ­ntese (fase fotoquÃ­mica).",
          "Excesso â†’ queima nas bordas das folhas."
        ]
      }
      // ... (restante das questÃµes do Ãºltimo cÃ³digo, mantidas iguais)
    ];

    let questions = [];
    let score = 0;
    let currentQuestion = 0;
    let hintIndex = 0;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startGame() {
      document.getElementById("intro").style.display = "none";
      document.getElementById("game").style.display = "block";
      score = 0;
      currentQuestion = 0;
      hintIndex = 0;
      questions = shuffle([...allQuestions]);
      document.getElementById("score").innerText = "PontuaÃ§Ã£o: " + score;
      showQuestion();
    }

    function showQuestion() {
      const q = questions[currentQuestion];
      hintIndex = 0;

      document.getElementById("symptom").innerText = "Sintoma: " + q.sintoma;
      document.getElementById("hints").innerHTML = "";
      document.getElementById("hintBtn").style.display = "inline-block";

      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      shuffle([...q.opcoes]).forEach(opt => {
        const btn = document.createElement("button");
        btn.innerText = opt;
        btn.onclick = () => checkAnswer(opt, q.resposta);
        optionsDiv.appendChild(btn);
      });

      document.getElementById("feedback").innerText = "";
    }

    function showHint() {
      const q = questions[currentQuestion];
      if (hintIndex < q.dicas.length) {
        const hintBox = document.createElement("div");
        hintBox.className = "hint-box";
        hintBox.innerText = "ðŸ’¡ " + q.dicas[hintIndex];
        document.getElementById("hints").appendChild(hintBox);
        hintIndex++;
        score--; // perde 1 ponto
        document.getElementById("score").innerText = "PontuaÃ§Ã£o: " + score;
      } else {
        const warn = document.createElement("div");
        warn.className = "hint-box";
        warn.innerText = "âš ï¸ Sem mais dicas!";
        document.getElementById("hints").appendChild(warn);
      }
    }

    function checkAnswer(selected, correct) {
      const feedback = document.getElementById("feedback");
      if (selected === correct) {
        feedback.innerText = "âœ… Correto!";
        feedback.className = "correct";
        score++;
      } else {
        feedback.innerText = "âŒ Incorreto. Resposta certa: " + correct;
        feedback.className = "wrong";
      }
      document.getElementById("score").innerText = "PontuaÃ§Ã£o: " + score;

      currentQuestion++;
      if (currentQuestion < questions.length) {
        setTimeout(showQuestion, 2000);
      } else {
        setTimeout(endGame, 2000);
      }
    }

    function endGame() {
      document.getElementById("symptom").innerText = "Fim do jogo!";
      document.getElementById("options").innerHTML = "";
      document.getElementById("hintBtn").style.display = "none";
      document.getElementById("hints").innerText = "";
      document.getElementById("feedback").innerText = "VocÃª fez " + score + " pontos.";
    }
  </script>
</body>
</html>
